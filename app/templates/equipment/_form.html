{# app/templates/equipment/_form.html #}
{# Предполагается, что у вас есть макрос render_field в _form_helpers.html или аналогичный #}
{# {% from "_form_helpers.html" import render_field %} #}
{# Если нет, рендерим поля вручную #}

{{ form.hidden_tag() }} {# Для CSRF, если используется #}

<div class="row">
    <div class="col-md-6 mb-3">
        {{ form.name.label(class="form-label") }}
        {{ form.name(class="form-control" + (" is-invalid" if form.name.errors else ""), placeholder="Принтер HP LaserJet Pro M402n") }}
        {% if form.name.errors %}<div class="invalid-feedback">{% for error in form.name.errors %}{{ error }}{% endfor %}</div>{% endif %}
    </div>
    <div class="col-md-6 mb-3">
        {{ form.inventory_number.label(class="form-label") }}
        {{ form.inventory_number(class="form-control" + (" is-invalid" if form.inventory_number.errors else ""), placeholder="INV-00123") }}
        {% if form.inventory_number.errors %}<div class="invalid-feedback">{% for error in form.inventory_number.errors %}{{ error }}{% endfor %}</div>{% endif %}
    </div>
</div>

<div class="row">
    <div class="col-md-6 mb-3">
        {{ form.category_id.label(class="form-label") }}
        {{ form.category_id(class="form-select" + (" is-invalid" if form.category_id.errors else "")) }}
        {% if form.category_id.errors %}<div class="invalid-feedback">{% for error in form.category_id.errors %}{{ error }}{% endfor %}</div>{% endif %}
    </div>
    <div class="col-md-6 mb-3">
        {{ form.purchase_date.label(class="form-label") }}
        {{ form.purchase_date(class="form-control" + (" is-invalid" if form.purchase_date.errors else "")) }}
        {% if form.purchase_date.errors %}<div class="invalid-feedback">{% for error in form.purchase_date.errors %}{{ error }}{% endfor %}</div>{% endif %}
    </div>
</div>

<div class="row">
    <div class="col-md-6 mb-3">
        {{ form.cost.label(class="form-label") }}
        {{ form.cost(class="form-control" + (" is-invalid" if form.cost.errors else ""), placeholder="15000.50") }}
        {% if form.cost.errors %}<div class="invalid-feedback">{% for error in form.cost.errors %}{{ error }}{% endfor %}</div>{% endif %}
    </div>
    <div class="col-md-6 mb-3">
        {{ form.status.label(class="form-label d-block") }} {# d-block для корректного отображения #}
        {% for subfield in form.status %}
            <div class="form-check form-check-inline">
                {{ subfield(class="form-check-input" + (" is-invalid" if form.status.errors else "")) }}
                {{ subfield.label(class="form-check-label") }}
            </div>
        {% endfor %}
        {% if form.status.errors %}<div class="invalid-feedback d-block">{% for error in form.status.errors %}{{ error }}{% endfor %}</div>{% endif %}
    </div>
</div>

<div class="mb-3">
    {{ form.notes.label(class="form-label") }}
    {{ form.notes(class="form-control" + (" is-invalid" if form.notes.errors else ""), rows="3", placeholder="Дополнительная информация...") }}
    {% if form.notes.errors %}<div class="invalid-feedback">{% for error in form.notes.errors %}{{ error }}{% endfor %}</div>{% endif %}
</div>

<div class="mb-3">
    {{ form.image.label(class="form-label") }}
    {{ form.image(class="form-control" + (" is-invalid" if form.image.errors else "")) }}
    {% if form.image.errors %}<div class="invalid-feedback">{% for error in form.image.errors %}{{ error }}{% endfor %}</div>{% endif %}
    {% if current_image_url %} {# Передаем current_image_url для формы редактирования #}
        <div class="mt-2">
            <small>Текущее изображение:</small><br>
            <img src="{{ current_image_url }}" alt="Текущее изображение" style="max-height: 100px; max-width: 100px; margin-top: 5px;">
        </div>
    {% endif %}
</div>

<div class="mt-4">
    {{ form.submit(class="btn btn-primary") }}
    <a href="{{ url_for('equipment.index') }}" class="btn btn-secondary ms-2">Отмена</a>
</div> 